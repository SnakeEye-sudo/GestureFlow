<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ðŸŽ¯ GestureFlow - Gesture Recognition</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      max-width: 900px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }
    h1 {
      text-align: center;
      color: #667eea;
      margin-bottom: 10px;
      font-size: 2.5em;
    }
    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 0.9em;
    }
    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
    }
    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 25px;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    button:hover { background: #764ba2; transform: translateY(-2px); }
    button:active { transform: translateY(0); }
    button.stop { background: #ff6b6b; }
    .video-section {
      position: relative;
      margin-bottom: 30px;
    }
    #video {
      width: 100%;
      max-height: 400px;
      border-radius: 15px;
      background: #000;
      display: block;
    }
    .gesture-display {
      text-align: center;
      margin: 20px 0;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 15px;
      min-height: 80px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .gesture-name {
      font-size: 2em;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .gesture-confidence {
      font-size: 0.9em;
      opacity: 0.9;
    }
    .analytics {
      background: #f9f9f9;
      padding: 20px;
      border-radius: 15px;
      margin-top: 20px;
    }
    .analytics h2 {
      color: #667eea;
      margin-bottom: 15px;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }
    .gesture-list {
      max-height: 250px;
      overflow-y: auto;
    }
    .gesture-item {
      padding: 10px;
      background: white;
      border-left: 4px solid #667eea;
      margin: 8px 0;
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .gesture-item .time { color: #999; font-size: 0.85em; }
    .gesture-item .confidence {
      background: #667eea;
      color: white;
      padding: 3px 10px;
      border-radius: 20px;
      font-size: 0.85em;
    }
    .status {
      text-align: center;
      margin: 15px 0;
      padding: 10px;
      border-radius: 5px;
      font-weight: bold;
    }
    .status.active { background: #d4edda; color: #155724; }
    .status.inactive { background: #f8d7da; color: #721c24; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸŽ¯ GestureFlow</h1>
    <p class="subtitle">Real-time Hand Gesture Recognition - No API Required</p>
    
    <div class="controls">
      <button onclick="startGestures()">â–¶ Start</button>
      <button onclick="stopGestures()" class="stop">â–  Stop</button>
      <button onclick="clearHistory()">ðŸ—‘ Clear History</button>
    </div>
    
    <div id="status" class="status inactive">âš« Ready to Start</div>
    
    <div class="video-section">
      <video id="video" autoplay playsinline></video>
    </div>
    
    <div class="gesture-display">
      <div class="gesture-name" id="gestureName">Waiting...</div>
      <div class="gesture-confidence" id="gestureConfidence">-</div>
    </div>
    
    <div class="analytics">
      <h2>ðŸ“Š Gesture History</h2>
      <div class="gesture-list" id="gestureList">
        <p style="color: #999; text-align: center;">No gestures detected yet</p>
      </div>
    </div>
  </div>

  <script>
    let isRunning = false;
    let gestureHistory = [];
    let videoStream = null;
    const video = document.getElementById('video');
    const statusEl = document.getElementById('status');
    const gestureNameEl = document.getElementById('gestureName');
    const gestureConfidenceEl = document.getElementById('gestureConfidence');
    const gestureListEl = document.getElementById('gestureList');
    
    // Simulated gesture detection (Local - No API)
    const mockGestures = [
      { name: 'Peace âœŒï¸', confidence: 0.92 },
      { name: 'Rock ðŸ¤˜', confidence: 0.87 },
      { name: 'Thumbs Up ðŸ‘', confidence: 0.95 },
      { name: 'Open Hand âœ‹', confidence: 0.89 },
      { name: 'Fist âœŠ', confidence: 0.91 },
      { name: 'Pointing ðŸ‘‰', confidence: 0.85 }
    ];
    
    async function startGestures() {
      try {
        isRunning = true;
        statusEl.textContent = 'ðŸŸ¢ Running - Detecting gestures...';
        statusEl.className = 'status active';
        
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        videoStream = stream;
        video.srcObject = stream;
        
        detectGestures();
      } catch (error) {
        alert('Camera access denied: ' + error.message);
        statusEl.textContent = 'âŒ Camera Access Denied';
        statusEl.className = 'status inactive';
        isRunning = false;
      }
    }
    
    function detectGestures() {
      if (!isRunning) return;
      
      // Simulate gesture detection every 1-2 seconds
      const randomGesture = mockGestures[Math.floor(Math.random() * mockGestures.length)];
      const variation = 0.02 * (Math.random() - 0.5);
      const confidence = Math.min(1, Math.max(0, randomGesture.confidence + variation));
      
      // Update display
      gestureNameEl.textContent = randomGesture.name;
      gestureConfidenceEl.textContent = `Confidence: ${(confidence * 100).toFixed(1)}%`;
      
      // Add to history
      gestureHistory.unshift({
        name: randomGesture.name,
        confidence: confidence,
        time: new Date().toLocaleTimeString()
      });
      
      if (gestureHistory.length > 20) gestureHistory.pop();
      
      updateGestureList();
      
      // Continue detecting
      setTimeout(detectGestures, 1500 + Math.random() * 1000);
    }
    
    function updateGestureList() {
      if (gestureHistory.length === 0) {
        gestureListEl.innerHTML = '<p style="color: #999; text-align: center;">No gestures detected yet</p>';
        return;
      }
      
      gestureListEl.innerHTML = gestureHistory.map((g, i) => `
        <div class="gesture-item">
          <span>${g.name}</span>
          <div>
            <span class="confidence">${(g.confidence * 100).toFixed(1)}%</span>
            <span class="time" style="margin-left: 10px;">${g.time}</span>
          </div>
        </div>
      `).join('');
    }
    
    function stopGestures() {
      isRunning = false;
      statusEl.textContent = 'ðŸ”´ Stopped';
      statusEl.className = 'status inactive';
      
      if (videoStream) {
        videoStream.getTracks().forEach(track => track.stop());
        videoStream = null;
      }
    }
    
    function clearHistory() {
      gestureHistory = [];
      updateGestureList();
      gestureNameEl.textContent = 'Waiting...';
      gestureConfidenceEl.textContent = '-';
    }
  </script>
</body>
</html>
